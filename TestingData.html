<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ChrisMax Cyberpunk Leaderboard</title>

<!-- Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Space+Grotesk:wght@600;700&display=swap" rel="stylesheet">

<!-- Icons -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box}

/* ===== BASE ===== */
html, body{
    height:100%;
    width:100%;
    font-family:'Poppins',sans-serif;
    background:#070b12;
    color:#fff;
    position:relative;
    overflow:hidden;
}

/* ===== CYBER GRID ===== */
.grid{
    position:fixed;
    inset:0;
    background:
      linear-gradient(rgba(255,42,42,.25) 1px, transparent 1px),
      linear-gradient(90deg, rgba(255,42,42,.25) 1px, transparent 1px);
    background-size:40px 40px;
    transform-origin:center;
    transform:perspective(800px) rotateX(60deg);
    animation:gridMove 20s linear infinite;
    opacity:.25;
    z-index:0;
}
@keyframes gridMove{
    from{background-position:0 0,0 0}
    to{background-position:0 800px,800px 0}
}

/* ===== PARTICLES ===== */
.particle{
    position:fixed;
    top:-10px;
    pointer-events:none;
    animation:fall linear infinite;
    opacity:.8;
    z-index:1;
    font-size:14px;
}
@keyframes fall{
    to{transform:translateY(110vh)}
}

/* ===== CONTAINER ===== */
.container{
    max-width:1050px;
    margin:40px auto;
    padding:25px;
    position:relative;
    z-index:3;
    border-radius:28px;
    background:linear-gradient(135deg, rgba(255,42,42,0.12), rgba(0,0,0,0.4));
    box-shadow:0 0 50px rgba(255,42,42,0.4);
    border:1px solid rgba(255,42,42,0.2);
}

/* Container icons */
.container::before,
.container::after{
    content:"üéÅüéÑüéÖ‚ùÑ";
    position:absolute;
    font-size:20px;
    opacity:0.6;
    animation:floatIcon 5s infinite alternate;
}
.container::before{top:-10px; left:10px;}
.container::after{bottom:-10px; right:10px;}
@keyframes floatIcon{50%{transform:translateY(-8px) rotate(15deg)}}

/* ===== HEADER ===== */
.header{
    display:flex;
    justify-content:space-between;
    align-items:center;
    margin-bottom:12px;
    padding-bottom:12px;
    border-bottom:1px solid rgba(255,42,42,0.5);
}
.header .title{
    display:flex;
    gap:12px;
    align-items:center;
}
.header .title i{
    font-size:38px;
    color:#ff2a2a;
    text-shadow:0 0 30px rgba(255,42,42,0.8);
    animation:pulse 2s infinite;
}
@keyframes pulse{50%{transform:scale(1.15)}}
.header .title h1{
    font-family:'Space Grotesk',sans-serif;
    font-size:28px;
}
.header .title span{
    font-size:12px;
    opacity:0.7;
    letter-spacing:1px;
    text-transform:uppercase;
}

/* ===== REFRESH BUTTON ===== */
.refresh{
    background:linear-gradient(135deg,#ff2a2a,#ff6a6a);
    border:none;
    padding:12px 25px;
    border-radius:40px;
    font-weight:700;
    display:flex;
    align-items:center;
    gap:10px;
    cursor:pointer;
    box-shadow:0 0 30px rgba(255,42,42,.7);
    transition:.3s;
    z-index:3;
}
.refresh:hover{transform:scale(1.1)}
.refresh.spin i{animation:spin 1s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}

/* ===== TABLE CARD ===== */
.card{
    background:linear-gradient(135deg, rgba(255,42,42,0.08), rgba(0,0,0,0.4));
    border-radius:26px;
    border:1px solid rgba(255,42,42,0.2);
    box-shadow:0 0 50px rgba(255,42,42,0.3);
    padding:15px;
}

/* ===== TABLE ===== */
.table-container{
    max-height:400px; /* scrollable height */
    overflow-y:auto;
    margin-top:10px;
}
table{
    width:100%;
    border-collapse:separate;
    border-spacing:0 12px;
}
th{
    font-size:14px;
    opacity:.7;
    text-align:left;
    padding:10px 20px;
    position:sticky;
    top:0;
    background:rgba(0,0,0,0.4);
    z-index:2;
}
td{
    padding:14px 20px;
    font-size:15px;
}

/* ===== ROWS ===== */
.row{
    background:rgba(255,255,255,.05);
    border-radius:16px;
    transition:.35s;
    position:relative;
}
.row:hover{
    transform:translateY(-2px) scale(1.01);
    box-shadow:0 0 25px rgba(255,42,42,.5);
}

/* ===== FIRST PLACE ===== */
.first{
    background:linear-gradient(135deg,rgba(255,42,42,.5),rgba(255,255,255,.08));
    box-shadow:0 0 60px rgba(255,42,42,1);
}
.first::after{
    content:"üéÅ";
    position:absolute;
    top:-10px;
    right:-10px;
    font-size:28px;
    animation:float 2s infinite;
}
@keyframes float{50%{transform:translateY(-6px)}}

/* ===== RANK ===== */
.rank{
    font-weight:800;
    font-size:18px;
}
.rank i{margin-right:6px; color:#ff2a2a;}

/* ===== POINTS ===== */
.points{
    font-weight:700;
    color:#ff4d4d;
    text-shadow:0 0 10px rgba(255,42,42,.6);
}

/* ===== FESTIVE ICONS ===== */
.festive-icon{
    margin-left:6px;
    animation:icon-bounce 2s infinite alternate;
}
@keyframes icon-bounce{
    50%{transform:translateY(-4px);}
}
</style>
</head>

<body>

<!-- Cyber Grid -->
<div class="grid"></div>

<!-- PARTICLES -->
<script>
const icons=["‚ùÑ","üéÅ","üéÑ","üéÖ"];
for(let i=0;i<80;i++){
    const p=document.createElement("div");
    p.className="particle";
    p.textContent=icons[Math.floor(Math.random()*icons.length)];
    p.style.left=Math.random()*100+"vw";
    p.style.fontSize=12+Math.random()*20+"px";
    p.style.animationDuration=5+Math.random()*12+"s";
    p.style.opacity=Math.random();
    document.body.appendChild(p);
}
</script>

<div class="container">
<div class="card">

<div class="header">
    <div class="title">
        <i class="fas fa-gift"></i>
        <div>
            <h1>Leaderboard <span class="festive-icon">üéÑ</span></h1>
            <span>Chris Mom & Child Leaderboard</span>
        </div>
    </div>
    <button id="refreshBtn" class="refresh" onclick="loadData()">
        <i class="fas fa-rotate"></i> Refresh
    </button>
</div>

<div class="table-container">
<table>
<thead>
<tr>
    <th>Rank</th>
    <th><i class="fas fa-user"></i> Player</th>
    <th><i class="fas fa-star"></i> Points</th>
</tr>
</thead>
<tbody id="board"></tbody>
</table>
</div>

</div>
</div>

<script>
const SHEET_URL = "https://docs.google.com/spreadsheets/d/1s1XHXFJe0_o2fp7ysxb0AFcoqmkna2C8rO_kcuyeolQ/gviz/tq?tqx=out:csv";

async function loadData(){
    const btn=document.getElementById("refreshBtn");
    btn.classList.add("spin");

    const tbody=document.getElementById("board");
    tbody.innerHTML="";

    try{
        const res=await fetch(SHEET_URL);
        const txt=await res.text();
        const rows=txt.trim().split("\n").map(r=>r.split(",").map(c=>c.trim())); // Trim spaces

        rows.shift(); // remove header

        const data=rows.map(r=>({name:r[0], points: Number(r[1]) || 0}));
        data.sort((a,b)=>b.points - a.points);
        const topPoints = data[0]?.points;

        data.forEach((p,i)=>{
            const tr=document.createElement("tr");
            tr.className="row"+(p.points===topPoints?" first":"");
            tr.innerHTML=`
                <td class="rank">${p.points===topPoints?'<i class="fas fa-crown"></i>#1':`#${i+1}`}</td>
                <td>${p.name} ${p.points===topPoints?'<span class="festive-icon">üéÖ</span>':''}</td>
                <td class="points">${p.points}</td>
            `;
            tbody.appendChild(tr);
        });

    }catch(e){
        tbody.innerHTML="<tr><td colspan='3'>Failed to load data</td></tr>";
        console.error(e);
    }

    btn.classList.remove("spin");
}

loadData();
</script>

</body>
</html>
